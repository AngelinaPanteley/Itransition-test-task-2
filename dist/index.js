!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";n(1),n(9),n(11),n(14)},function(e,t){},,,,,,,,function(e,t){},,function(e,t){},,,function(e,t,n){"use strict";var r=n(15),i=new r("http://www.json-generator.com/api/json/get/bUsRkvEmHm?indent=2");document.getElementById("request-btn").addEventListener("click",i.loadFile)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(16),s=function(){function e(t){r(this,e),this.filepath=t,this.loadPage=this.loadPage.bind(this),this.loadFile=this.loadFile.bind(this),this.getFile=this.getFile.bind(this),this.generateForm=this.generateForm.bind(this),this.generateTable=this.generateTable.bind(this),this.submitForm=this.submitForm.bind(this),this.changeForm=this.changeForm.bind(this),this.selectAll=this.selectAll.bind(this),this.clearSelection=this.clearSelection.bind(this),this.sortColumn=this.sortColumn.bind(this)}return i(e,[{key:"loadPage",value:function(e){var t=document.getElementById(e).text;o.parse(t);var n=o.render(t);document.getElementById("content").innerHTML=n}},{key:"getFile",value:function(){var e=this.filepath;return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.onload=function(){200===this.status?t(this.response):n(new Error(this.status))},r.send()})}},{key:"loadFile",value:function(){var e=this;this.loadPage("step1"),this.getFile().then(function(t){e.response=JSON.parse(t),e.loadPage("step2"),e.generateForm()},function(e){alert(e)})}},{key:"generateForm",value:function(){this.keys=Object.keys(this.response[0]);var e=document.getElementById("selectors"),t='<li class="form__checkbox"><input class="form__checkbox__input" id={{key}} type="checkbox" name="column"  /><label class="form__checkbox__label" for={{key}}>{{key}}</label></li>';this.keys.forEach(function(n){e.innerHTML+=o.to_html(t,{key:n})}),document.getElementById("submit-btn").addEventListener("click",this.submitForm),document.getElementById("select-all").addEventListener("click",this.selectAll),document.getElementById("clear-selection").addEventListener("click",this.clearSelection)}},{key:"submitForm",value:function(e){var t=this;e.preventDefault();var n=document.querySelectorAll("li.form__checkbox input:checked");this.checkedValues=[],n.length?(n.forEach(function(e){t.checkedValues.push(e.id)}),this.loadPage("step3"),this.generateTable(),document.getElementById("back-btn").addEventListener("click",this.changeForm)):alert("Please, choose some fields")}},{key:"generateTable",value:function(){var e=this,t='<td class="data-table__{{key}}" id={{key}}>{{value}}<a class="sort up"></a><a class="sort down"></a></td>',n='<td class="data-table__{{key}}">{{value}}</td>',r=document.getElementById("table-head");r.innerHTML="",this.checkedValues.forEach(function(e){r.innerHTML+=o.to_html(t,{value:e,key:e})});var i=document.getElementById("table-body");i.innerHTML="",this.response.forEach(function(t){var r=document.createElement("tr");e.checkedValues.forEach(function(e){r.innerHTML+=o.to_html(n,{value:t[e],key:e})}),i.appendChild(r)}),document.querySelectorAll(".sort").forEach(function(t){t.addEventListener("click",e.sortColumn)})}},{key:"changeForm",value:function(){this.loadPage("step2"),this.generateForm(),this.checkedValues.forEach(function(e){document.querySelector("input#"+e).checked=!0})}},{key:"selectAll",value:function(){document.querySelectorAll("li.form__checkbox input").forEach(function(e){e.checked=!0})}},{key:"clearSelection",value:function(){document.querySelectorAll("li.form__checkbox input:checked").forEach(function(e){e.checked=!1})}},{key:"sortColumn",value:function(e){function t(e,t){return Number.isNaN(+e[r])?e[r]>t[r]?-1:e[r]<t[r]?1:0:t[r]-e[r]}function n(e,t){return Number.isNaN(+e[r])?e[r]<t[r]?-1:e[r]>t[r]?1:0:e[r]-t[r]}var r=e.target.parentNode.id;e.target.classList.contains("up")?this.response.sort(t):this.response.sort(n),this.generateTable()}}]),e}();e.exports=s},function(e,t,n){var r,i,o,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*!
	 * mustache.js - Logic-less {{mustache}} templates with JavaScript
	 * http://github.com/janl/mustache.js
	 */
!function(n,a){"object"===s(t)&&t&&"string"!=typeof t.nodeName?a(t):(i=[t],r=a,o="function"==typeof r?r.apply(t,i):r,!(void 0!==o&&(e.exports=o)))}(void 0,function(e){function t(e){return"function"==typeof e}function n(e){return y(e)?"array":"undefined"==typeof e?"undefined":s(e)}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(e,t){return null!=e&&"object"===("undefined"==typeof e?"undefined":s(e))&&t in e}function o(e,t){return g.call(e,t)}function a(e){return!o(v,e)}function c(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return b[e]})}function l(t,n){function i(){if(g&&!v)for(;m.length;)delete d[m.pop()];else m=[];g=!1,v=!1}function o(e){if("string"==typeof e&&(e=e.split(w,2)),!y(e)||2!==e.length)throw new Error("Invalid tags: "+e);s=new RegExp(r(e[0])+"\\s*"),c=new RegExp("\\s*"+r(e[1])),l=new RegExp("\\s*"+r("}"+e[1]))}if(!t)return[];var s,c,l,p=[],d=[],m=[],g=!1,v=!1;o(n||e.tags);for(var b,F,T,S,I,L,P=new f(t);!P.eos();){if(b=P.pos,T=P.scanUntil(s))for(var A=0,U=T.length;A<U;++A)S=T.charAt(A),a(S)?m.push(d.length):v=!0,d.push(["text",S,b,b+1]),b+=1,"\n"===S&&i();if(!P.scan(s))break;if(g=!0,F=P.scan(_)||"name",P.scan(k),"="===F?(T=P.scanUntil(E),P.scan(E),P.scanUntil(c)):"{"===F?(T=P.scanUntil(l),P.scan(x),P.scanUntil(c),F="&"):T=P.scanUntil(c),!P.scan(c))throw new Error("Unclosed tag at "+P.pos);if(I=[F,T,b,P.pos],d.push(I),"#"===F||"^"===F)p.push(I);else if("/"===F){if(L=p.pop(),!L)throw new Error('Unopened section "'+T+'" at '+b);if(L[1]!==T)throw new Error('Unclosed section "'+L[1]+'" at '+b)}else"name"===F||"{"===F||"&"===F?v=!0:"="===F&&o(T)}if(L=p.pop())throw new Error('Unclosed section "'+L[1]+'" at '+P.pos);return h(u(d))}function u(e){for(var t,n,r=[],i=0,o=e.length;i<o;++i)t=e[i],t&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r}function h(e){for(var t,n,r=[],i=r,o=[],s=0,a=e.length;s<a;++s)switch(t=e[s],t[0]){case"#":case"^":i.push(t),o.push(t),i=t[4]=[];break;case"/":n=o.pop(),n[5]=t[2],i=o.length>0?o[o.length-1][4]:r;break;default:i.push(t)}return r}function f(e){this.string=e,this.tail=e,this.pos=0}function p(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function d(){this.cache={}}var m=Object.prototype.toString,y=Array.isArray||function(e){return"[object Array]"===m.call(e)},g=RegExp.prototype.test,v=/\S/,b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},k=/\s*/,w=/\s+/,E=/\s*=/,x=/\s*\}/,_=/#|\^|\/|>|\{|&|=|!/;f.prototype.eos=function(){return""===this.tail},f.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},f.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},p.prototype.push=function(e){return new p(e,this)},p.prototype.lookup=function(e){var n,r=this.cache;if(r.hasOwnProperty(e))n=r[e];else{for(var o,s,a=this,c=!1;a;){if(e.indexOf(".")>0)for(n=a.view,o=e.split("."),s=0;null!=n&&s<o.length;)s===o.length-1&&(c=i(n,o[s])),n=n[o[s++]];else n=a.view[e],c=i(a.view,e);if(c)break;a=a.parent}r[e]=n}return t(n)&&(n=n.call(this.view)),n},d.prototype.clearCache=function(){this.cache={}},d.prototype.parse=function(e,t){var n=this.cache,r=n[e];return null==r&&(r=n[e]=l(e,t)),r},d.prototype.render=function(e,t,n){var r=this.parse(e),i=t instanceof p?t:new p(t);return this.renderTokens(r,i,n,e)},d.prototype.renderTokens=function(e,t,n,r){for(var i,o,s,a="",c=0,l=e.length;c<l;++c)s=void 0,i=e[c],o=i[0],"#"===o?s=this.renderSection(i,t,n,r):"^"===o?s=this.renderInverted(i,t,n,r):">"===o?s=this.renderPartial(i,t,n,r):"&"===o?s=this.unescapedValue(i,t):"name"===o?s=this.escapedValue(i,t):"text"===o&&(s=this.rawValue(i)),void 0!==s&&(a+=s);return a},d.prototype.renderSection=function(e,n,r,i){function o(e){return a.render(e,n,r)}var a=this,c="",l=n.lookup(e[1]);if(l){if(y(l))for(var u=0,h=l.length;u<h;++u)c+=this.renderTokens(e[4],n.push(l[u]),r,i);else if("object"===("undefined"==typeof l?"undefined":s(l))||"string"==typeof l||"number"==typeof l)c+=this.renderTokens(e[4],n.push(l),r,i);else if(t(l)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");l=l.call(n.view,i.slice(e[3],e[5]),o),null!=l&&(c+=l)}else c+=this.renderTokens(e[4],n,r,i);return c}},d.prototype.renderInverted=function(e,t,n,r){var i=t.lookup(e[1]);if(!i||y(i)&&0===i.length)return this.renderTokens(e[4],t,n,r)},d.prototype.renderPartial=function(e,n,r){if(r){var i=t(r)?r(e[1]):r[e[1]];return null!=i?this.renderTokens(this.parse(i),n,r,i):void 0}},d.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},d.prototype.escapedValue=function(t,n){var r=n.lookup(t[1]);if(null!=r)return e.escape(r)},d.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.3.0",e.tags=["{{","}}"];var F=new d;return e.clearCache=function(){return F.clearCache()},e.parse=function(e,t){return F.parse(e,t)},e.render=function(e,t,r){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+n(e)+'" was given as the first argument for mustache#render(template, view, partials)');return F.render(e,t,r)},e.to_html=function(n,r,i,o){var s=e.render(n,r,i);return t(o)?void o(s):s},e.escape=c,e.Scanner=f,e.Context=p,e.Writer=d,e})}]);